<div class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50" (click)="cancel()">
  <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto" (click)="$event.stopPropagation()" trapFocus>
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900">{{ 'limits.title' | translate }}: {{ 'measurementNames.' + measurementType() | translate }}</h3>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-6 space-y-4">
      @switch (measurementType()) {
        @case ('temperature_humidity') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="temperatureMin" class="block text-sm font-medium text-gray-700">{{ 'form.temperatureMin' | translate }}</label>
              <input type="number" id="temperatureMin" formControlName="temperatureMin" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
            <div>
              <label for="temperatureMax" class="block text-sm font-medium text-gray-700">{{ 'form.temperatureMax' | translate }}</label>
              <input type="number" id="temperatureMax" formControlName="temperatureMax" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
            <div>
              <label for="humidityMin" class="block text-sm font-medium text-gray-700">{{ 'form.humidityMin' | translate }}</label>
              <input type="number" id="humidityMin" formControlName="humidityMin" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" min="0" max="100">
            </div>
            <div>
              <label for="humidityMax" class="block text-sm font-medium text-gray-700">{{ 'form.humidityMax' | translate }}</label>
              <input type="number" id="humidityMax" formControlName="humidityMax" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" min="0" max="100">
            </div>
          </div>
        }
        @case ('luminosity') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="min" class="block text-sm font-medium text-gray-700">{{ 'form.luminosityMin' | translate }}</label>
              <input type="number" id="min" formControlName="min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
              <label for="max" class="block text-sm font-medium text-gray-700">{{ 'form.luminosityMax' | translate }}</label>
              <input type="number" id="max" formControlName="max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
          </div>
        }
        @case ('dustiness_iso6') {
          <div class="space-y-4">
            <div class="text-sm font-medium text-gray-700 mb-2">{{ 'form.particles_0_5um' | translate }}</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="particles_0_5um_min" class="block text-sm font-medium text-gray-700">{{ 'form.min' | translate }}</label>
                <input type="number" id="particles_0_5um_min" formControlName="particles_0_5um_min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
              <div>
                <label for="particles_0_5um_max" class="block text-sm font-medium text-gray-700">{{ 'form.max' | translate }}</label>
                <input type="number" id="particles_0_5um_max" formControlName="particles_0_5um_max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
            </div>
            <div class="text-sm font-medium text-gray-700 mb-2 mt-4">{{ 'form.particles_5um' | translate }}</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="particles_5um_min" class="block text-sm font-medium text-gray-700">{{ 'form.min' | translate }}</label>
                <input type="number" id="particles_5um_min" formControlName="particles_5um_min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
              <div>
                <label for="particles_5um_max" class="block text-sm font-medium text-gray-700">{{ 'form.max' | translate }}</label>
                <input type="number" id="particles_5um_max" formControlName="particles_5um_max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
            </div>
          </div>
        }
        @case ('dustiness_iso5') {
          <div class="space-y-4">
            <div class="text-sm font-medium text-gray-700 mb-2">{{ 'form.particles_0_5um' | translate }}</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="particles_0_5um_min" class="block text-sm font-medium text-gray-700">{{ 'form.min' | translate }}</label>
                <input type="number" id="particles_0_5um_min" formControlName="particles_0_5um_min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
              <div>
                <label for="particles_0_5um_max" class="block text-sm font-medium text-gray-700">{{ 'form.max' | translate }}</label>
                <input type="number" id="particles_0_5um_max" formControlName="particles_0_5um_max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
            </div>
            <div class="text-sm font-medium text-gray-700 mb-2 mt-4">{{ 'form.particles_5um' | translate }}</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="particles_5um_min" class="block text-sm font-medium text-gray-700">{{ 'form.min' | translate }}</label>
                <input type="number" id="particles_5um_min" formControlName="particles_5um_min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
              <div>
                <label for="particles_5um_max" class="block text-sm font-medium text-gray-700">{{ 'form.max' | translate }}</label>
                <input type="number" id="particles_5um_max" formControlName="particles_5um_max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
              </div>
            </div>
          </div>
        }
        @case ('torque') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="min" class="block text-sm font-medium text-gray-700">{{ 'form.torqueMin' | translate }}</label>
              <input type="number" id="min" formControlName="min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
            <div>
              <label for="max" class="block text-sm font-medium text-gray-700">{{ 'form.torqueMax' | translate }}</label>
              <input type="number" id="max" formControlName="max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
          </div>
        }
        @case ('surface_resistance') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="min" class="block text-sm font-medium text-gray-700">{{ 'form.resistanceMin' | translate }}</label>
              <input type="number" id="min" formControlName="min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
              <label for="max" class="block text-sm font-medium text-gray-700">{{ 'form.resistanceMax' | translate }}</label>
              <input type="number" id="max" formControlName="max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
          </div>
        }
        @case ('grounding_resistance') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="min" class="block text-sm font-medium text-gray-700">{{ 'form.resistanceMin' | translate }}</label>
              <input type="number" id="min" formControlName="min" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
            <div>
              <label for="max" class="block text-sm font-medium text-gray-700">{{ 'form.resistanceMax' | translate }}</label>
              <input type="number" id="max" formControlName="max" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
          </div>
        }
        @case ('ionizer') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="decayTime" class="block text-sm font-medium text-gray-700">{{ 'form.decayTimeLimit' | translate }}</label>
              <input type="number" id="decayTime" formControlName="decayTime" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" step="0.1">
            </div>
            <div>
              <label for="balance" class="block text-sm font-medium text-gray-700">{{ 'form.balanceLimit' | translate }}</label>
              <input type="number" id="balance" formControlName="balance" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
          </div>
        }
      }

      <div class="flex justify-end space-x-3 pt-4 border-t mt-6">
        <button type="button" (click)="cancel()" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
          {{ 'form.cancel' | translate }}
        </button>
        <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" [disabled]="form.invalid">
          {{ 'limits.save' | translate }}
        </button>
      </div>
    </form>
  </div>
</div>
